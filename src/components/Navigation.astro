---
import EmailPopup from "./EmailPopup.astro";
import InstallPWA from "./InstallPWA.astro";
---

<nav class="nav-container">
	<div class="nav-content">
		<div class="nav-logo">
			<a href="/" style="text-decoration: none;"
				><img
					src={import.meta.env.BASE_URL + "delegados.png"}
					class="logo"
					alt="delegados logo"
				/><h2>1B Bach</h2></a
			>
		</div>
		<ul class="nav-menu">
			<li><a href="/#hero">Inicio</a></li>
			<li><a href="/#calendar">Examenes</a></li>
			<li><a href="/#eventos">Eventos</a></li>
			<li><a href="/#noticias">Noticias</a></li>
			<li><a href="/#links">Recursos</a></li>
			<li>
				<a href="#" id="mail-btn" aria-label="Contactar por correo">
					<i class="fa-solid fa-envelope"></i>
				</a>
			</li>
			<li class="install-li">
				<InstallPWA />
			</li>
		</ul>
		<div class="nav-burger">
			<span></span>
			<span></span>
			<span></span>
		</div>
	</div>
</nav>

<style>
	.nav-container {
		position: fixed;
		top: 0;
		width: 100%;
		z-index: 1000;
		background: linear-gradient(
			135deg,
			rgba(32, 0, 173, 0.7) 0%,
			rgba(0, 86, 204, 0.6) 100%
		);
		backdrop-filter: blur(20px);
		border-bottom: 1px solid rgba(255, 255, 255, 0.2);
		transition: all 0.3s ease;
	}

	.nav-content {
		max-width: 1200px;
		margin: 0 auto;
		display: flex;
		justify-content: space-between;
		align-items: center;
		padding: 16px 24px;
	}

	.nav-logo h2 {
		color: white;
		font-weight: 600;
		font-size: 1.5rem;
	}

	.nav-logo a {
		display: flex;
		align-items: center;
		gap: 1rem;
	}

	.logo {
		width: 40px;
		height: auto;
	}

	.nav-menu {
		display: flex;
		list-style: none;
		gap: 32px;
		align-items: center;
	}

	.nav-menu a {
		color: white;
		text-decoration: none;
		font-weight: 500;
		transition: all 0.3s ease;
		position: relative;
	}

	.nav-menu a::after {
		content: "";
		position: absolute;
		bottom: -4px;
		left: 0;
		width: 0;
		height: 2px;
		background: white;
		transition: width 0.3s ease;
	}

	.nav-menu a:hover::after {
		width: 100%;
	}

	.nav-menu a:hover {
		color: #ffffff;
		transform: translateY(-2px);
	}

	.nav-burger {
		display: none;
		flex-direction: column;
		cursor: pointer;
		gap: 4px;
	}

	.nav-burger span {
		width: 24px;
		height: 3px;
		background: white;
		transition: 0.3s;
	}

	.install-li {
		display: flex;
		align-items: center;
	}

	@media (max-width: 768px) {
		.nav-menu {
			position: fixed;
			top: 70px;
			left: -100%;
			flex-direction: column;
			background: rgba(32, 0, 173, 0.95);
			backdrop-filter: blur(20px);
			width: 100%;
			height: calc(100vh - 70px);
			text-align: center;
			transition: 0.3s;
			padding: 2rem;
			gap: 2rem;
		}

		.nav-menu.active {
			left: 0;
			display: flex;
		}

		.nav-menu a {
			font-size: 1.2rem;
			display: block;
			padding: 1rem;
		}

		.nav-burger {
			display: flex;
			z-index: 1001;
		}

		.nav-burger.active span:nth-child(1) {
			transform: translateY(7px) rotate(45deg);
		}

		.nav-burger.active span:nth-child(2) {
			opacity: 0;
		}

		.nav-burger.active span:nth-child(3) {
			transform: translateY(-7px) rotate(-45deg);
		}

		.install-li {
			width: 100%;
		}
	}
</style>

<script>
	document.getElementById("mail-btn")?.addEventListener("click", (e) => {
		e.preventDefault();
		document.dispatchEvent(new Event("open-email-popup"));
	});

	const burger = document.querySelector(".nav-burger");
	const nav = document.querySelector(".nav-menu");
	const navLinks = document.querySelectorAll(".nav-menu li");

	burger?.addEventListener("click", () => {
		nav?.classList.toggle("active");
		burger.classList.toggle("active");
	});

	navLinks.forEach((link) => {
		link.addEventListener("click", () => {
			nav?.classList.remove("active");
			burger?.classList.remove("active");
		});
	});
</script>

<EmailPopup />
